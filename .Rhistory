ee_cloud <- import("ee_ipl_uv")
# 3. Load points with desired cloud average (after run point_creator.R)
local_cloudsen2_points <- read_sf("data/cloudsen2_potential_points.geojson")
local_cloudsen2_points <- read_sf("data/cloudsen2_potential_points.geojson")
local_cloudsen2_points
local_cloudsen2_points$label
local_cloudsen2_points %>%
filter(label = "high_quality")
local_cloudsen2_points %>%
filter(label == "high_quality")
local_cloudsen2_points$label
local_cloudsen2_points$labeler
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "jhomira")
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Jhomira")
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Jhomira") %>%
'[['(id)
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Jhomira") %>%
'[['("id")
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Jhomira") %>%
'[['("id")
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Jhomira") %>%
'[['("id") -> jhomira
jhomira
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Eduardo") %>%
'[['("id") -> eduardo
eduardo
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Fernando") %>%
'[['("id") -> fernando
fernando
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Eduardo") %>%
'[['("id") -> eduardo
eduardo
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Jhomira") %>%
'[['("id") -> jhomira
jhomira
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Jhomira") %>%
'[['("id") -> jhomira
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Eduardo") %>%
'[['("id") -> eduardo
local_cloudsen2_points %>%
filter(label == "high_quality") %>%
filter(labeler == "Fernando") %>%
'[['("id") -> fernando
local_cloudsen2_points
local_cloudsen2_points$labeler
local_cloudsen2_points$labeler
local_cloudsen2_points$labeler
local_cloudsen2_points$labeler
labr <- c("Jhomira", "Eduardo", "Fernando")
labr
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
local_sp$validator
local_sp$validator
labr
local_sp$validator
c(local_sp$validator[1], local_sp$labeler[1])
labr
labr %in%  c(local_sp$validator[1], local_sp$labeler[1])
labr
labr[!labr %in%  c(local_sp$validator[1], local_sp$labeler[1])]
local_sp$labeler
nrow(local_sp$validator)
length(local_sp$validator)
fd <- data_frame(
labeler = local_sp$labeler,
evaluation_I = local_sp$validator,
evaluation_II = sapply(1:length(local_sp$validator), function(x) labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]),
)
fd
sapply(1:length(local_sp$validator), function(x) labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])])
sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]
) %>% unlist()
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
labr <- c("Jhomira", "Eduardo", "Fernando")
fd <- data_frame(
labeler = local_sp$labeler,
evaluation_I = local_sp$validator,
evaluation_II = sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]
) %>% unlist()
)
labr
fd
sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]
) %>% unlist()
fd <- data_frame(
labeler = local_sp$labeler,
evaluation_I = local_sp$validator,
evaluation_II = sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]
) %>% unlist()
)
local_sp$validator
sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]
) %>% unlist()
sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]
)
local_sp$validator
fd <- data_frame(
labeler = local_sp$labeler,
evaluation_I = local_sp$validator,
evaluation_II = sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) labr[labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]
) %>% unlist()
)
sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]
) %>% unlist() %>% length()
length(local_sp$validator)
x <- 1
local_sp$labeler
local_sp$labeler[x]
local_sp$validator[x]
c(local_sp$validator[x], local_sp$labeler[x])
labr %in%  c(local_sp$validator[x], local_sp$labeler[x])
!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])
sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) lengthlabr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]
) %>% unlist() %>% length()
sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) length(labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])])
) %>% unlist() %>% length()
sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) length(labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])])
) %>% unlist()
sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) length(labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])])
) %>% unlist() %>% table()
sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) length(labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])])
) %>% unlist()
dasda <- sapply(
X = 1:length(local_sp$validator),
FUN =  function(x) length(labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])])
) %>% unlist()
which(dasda==3)
x <- 3687
c(local_sp$validator[x], local_sp$labeler[x])
local_sp$label
table(local_sp$label)
table(local_sp$labeler)
local_sp <- read_sf("data/cloudsen2_potential_points.geojson") %>% filter(labeler == "no_label")
local_sp
local_sp1 <- read_sf("data/cloudsen2_potential_points.geojson") %>% filter(labeler == "no_label")
local_sp2 <- read_sf("data/cloudsen2_potential_points.geojson") %>% filter(labeler != "no_label")
labr <- c("Jhomira", "Eduardo", "Fernando")
labr <- c("Jhomira", "Eduardo", "Fernando")
fd <- data_frame(
labeler = local_sp2$labeler,
evaluation_I = local_sp2$validator,
evaluation_II = sapply(
X = 1:length(local_sp2$validator),
FUN =  function(x) labr[!labr %in%  c(local_sp$validator[x], local_sp$labeler[x])]
) %>% unlist()
)
local_sp2$validator
length(local_sp2$validator)
fd <- data_frame(
labeler = local_sp2$labeler,
evaluation_I = local_sp2$validator,
evaluation_II = sapply(
X = 1:length(local_sp2$validator),
FUN =  function(x) labr[!labr %in%  c(local_sp2$validator[x], local_sp2$labeler[x])]
) %>% unlist()
)
fd
local_sp2
local_sp2$id
sprintf("point")
local_sp2
local_sp2$id
sprintf("point_%s_%s", local_sp2$id, 1:5)
local_sp2$id
sprintf("point_%02d_%s", local_sp2$id, 1:5)
local_sp2$id
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
local_sp
nrow(local_sp)
seq_len(nrow(local_sp))
seq_len(nrow(local_sp))
index <- 1
local_sp
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
local_sp
local_sp[index, ]
local_sp[index, ]
point_sf <- local_sp[index, ]
point_sf
point_sf
point_sf
point_sf$id
sprintf("point_%02d_%s", point_sf$id, 1:5)
sprintf("point_%04d_%s", point_sf$id, 1:5)
point_sf$labeler
rep(point_sf$labeler, 5)
sprintf("point_%04d_%s", point_sf$id, 1:5)
local_sp2$validator
local_sp2$validator
rep(point_sf$validator, 5)
rep(point_sf$validator, 5)
index <- 3687
point_sf <- local_sp[index, ]
point_sf
point_sf$labeler
index <- 3687
index <- 3687
point_sf <- local_sp[index, ]
point_sf$labeler
point_sf$labeler == "no_label"
index <- 3687
point_sf <- local_sp[index, ]
sprintf("point_%04d_%s", point_sf$id, 1:5)
sprintf("point_%04d_%02d", point_sf$id, 1:5)
rep(point_sf$labeler, 5)
rep(point_sf$validator, 5)
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
labr <- c("Jhomira", "Eduardo", "Fernando")
index <- 3687
point_sf <- local_sp[index, ]
point_sf
point_sf$labeler
point_sf$labeler == "no_label"
sprintf("point_%04d_%02d", point_sf$id, 1:5)
rep(point_sf$labeler, 5)
rep(point_sf$validator, 5)
rep(point_sf$validator, 5)
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = rep(point_sf$validator, 5)
)
labr <- c("Jhomira", "Eduardo", "Fernando")
index <- 3687
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
index <- 3687
point_sf <- local_sp[index, ]
point_sf
labr <- c("Jhomira", "Eduardo", "Fernando")
point_sf$validator
c(point_sf$labeler, point_sf$validator)
index <- 1
point_sf <- local_sp[index, ]
point_sf
c(point_sf$labeler, point_sf$validator)
labr %in% c(point_sf$labeler, point_sf$validator)
labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
data_frame(
id = sprintf("point_%04d_%s", point_sf$id, 1:5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
)
generate_df <- function(x) {
point_sf <- local_sp[index, ]
if (point_sf$labeler == "no_label") {
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = rep(point_sf$validator, 5)
)
} else {
labr <- c("Jhomira", "Eduardo", "Fernando")
data_frame(
id = sprintf("point_%04d_%s", point_sf$id, 1:5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
)
}
}
library(sf)
library(sf)
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
generate_df <- function(x) {
point_sf <- local_sp[index, ]
if (point_sf$labeler == "no_label") {
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = rep(point_sf$validator, 5)
)
} else {
labr <- c("Jhomira", "Eduardo", "Fernando")
data_frame(
id = sprintf("point_%04d_%s", point_sf$id, 1:5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
)
}
}
generate_df(1)
index <- 3875
generate_df(1)
index <- 3875
index <- 3870
generate_df(1)
local_sp$label
local_sp$label == "no_label"
local_sp$label[local_sp$label == "no_label"]
table(local_sp$label)
local_sp$label[local_sp$label == "no_annotation"]
local_sp$label == "no_annotation"
which(local_sp$label == "no_annotation")
index <- 3687
generate_df(1)
point_sf$validator
local_sp[3687,]
local_sp[3687,]$type
local_sp[3687,]$value
local_sp[3687,]$labeler
local_sp[3687,]$label
point_sf$validator
library(tidyverse)
library(sf)
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
generate_df <- function(x) {
point_sf <- local_sp[index, ]
if (point_sf$labeler == "no_label") {
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
labeler = rep("no_annotation", 5),
evaluation_I = rep("no_annotation", 5),
evaluation_II = rep("no_annotation", 5)
)
} else {
labr <- c("Jhomira", "Eduardo", "Fernando")
data_frame(
id = sprintf("point_%04d_%s", point_sf$id, 1:5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
)
}
}
generate_df(1)
sapply(1:2, generate_df)
lapply(1:2, generate_df)
generate_df
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
generate_df <- function(x) {
point_sf <- local_sp[index, ]
if (point_sf$labeler == "no_label") {
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
labeler = rep("no_annotation", 5),
evaluation_I = rep("no_annotation", 5),
evaluation_II = rep("no_annotation", 5)
)
} else {
labr <- c("Jhomira", "Eduardo", "Fernando")
data_frame(
id = sprintf("point_%04d_%s", point_sf$id, 1:5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
)
}
}
lapply(1:2, generate_df)
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
generate_df <- function(index) {
point_sf <- local_sp[index, ]
if (point_sf$labeler == "no_label") {
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
labeler = rep("no_annotation", 5),
evaluation_I = rep("no_annotation", 5),
evaluation_II = rep("no_annotation", 5)
)
} else {
labr <- c("Jhomira", "Eduardo", "Fernando")
data_frame(
id = sprintf("point_%04d_%s", point_sf$id, 1:5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
)
}
}
lapply(1:2, generate_df)
local_sp
nrow(local_sp)
seq_len(nrow(local_sp))
find_dataset <- lapply(seq_len(nrow(local_sp)), generate_df)
find_dataset
bind_rows(find_dataset)
write_csv(bind_rows(find_dataset), "/home/csaybar/Desktop/user.csv")
generate_df <- function(index) {
point_sf <- local_sp[index, ]
if (point_sf$labeler == "no_label") {
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
labeler = rep("no_annotation", 5),
evaluation_I = rep("no_annotation", 5),
evaluation_II = rep("no_annotation", 5)
)
} else {
labr <- c("Jhomira", "Eduardo", "Fernando")
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
)
}
}
find_dataset <- lapply(seq_len(nrow(local_sp)), generate_df)
write_csv(bind_rows(find_dataset), "/home/csaybar/Desktop/user.csv")
library(tidyverse)
library(sf)
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
local_sp
local_sp$label
point_sf$label
point_sf$label
generate_df <- function(index) {
point_sf <- local_sp[index, ]
if (point_sf$labeler == "no_label") {
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
label = rep(point_sf$label, 5),
labeler = rep("no_annotation", 5),
evaluation_I = rep("no_annotation", 5),
evaluation_II = rep("no_annotation", 5)
)
} else {
labr <- c("Jhomira", "Eduardo", "Fernando")
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
label = rep(point_sf$label, 5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
)
}
}
library(tidyverse)
library(sf)
local_sp <- read_sf("data/cloudsen2_potential_points.geojson")
generate_df <- function(index) {
point_sf <- local_sp[index, ]
if (point_sf$labeler == "no_label") {
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
label = rep(point_sf$label, 5),
labeler = rep("no_annotation", 5),
evaluation_I = rep("no_annotation", 5),
evaluation_II = rep("no_annotation", 5)
)
} else {
labr <- c("Jhomira", "Eduardo", "Fernando")
data_frame(
id = sprintf("point_%04d_%02d", point_sf$id, 1:5),
label = rep(point_sf$label, 5),
labeler = rep(point_sf$labeler, 5),
evaluation_I = rep(point_sf$validator, 5),
evaluation_II = labr[!labr %in% c(point_sf$labeler, point_sf$validator)]
)
}
}
local_sp
local_sp$id
find_dataset <- lapply(seq_len(nrow(local_sp)), generate_df)
write_csv(bind_rows(find_dataset), "/home/csaybar/Desktop/user.csv")
local_cloudsen2_points
